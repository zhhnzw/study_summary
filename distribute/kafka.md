## Kafka

基于发布订阅模式

基于消费者主动拉取的模式（kafka所使用的）

优点：消费者可以自己来控制消费速率(如果是生产者推送模式，则是由生产者控制速率，则有可能出现推送速率过高，消费者消费能力不足，从而产生异常)

缺点：不管有没有消息，消费者都会对服务器进行长轮询，当没有新消息时，这种轮询就浪费了服务器资源

另一种基于消费者主动拉取的模式

针对于以上方案的长轮询缺点，采用服务端主动推送和客户端拉取相结合的方案，即：由服务端主动向客户端推送新消息到来的通知，然后由客户端收到通知后自己主动拉取实际数据。这个方案也有缺点：当客户端宕机，服务端也就通知不到它了（由服务端无限制的重试通知也是不合理的）

消费者tip:

**一个**分区下的某个topic只能被同一个消费者组里的某**一个**成员消费

同一个分区下的某个topic是不能被同一个消费者组里的多个成员同时消费的

当消费者组的成员数大于分区数时，就是资源浪费；当消费者组的成员数等于分区数时，即是最大消费能力的配置

