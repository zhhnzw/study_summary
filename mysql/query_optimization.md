## 查询优化

[查询优化之EXPLAIN](https://www.jianshu.com/p/ea3fc71fdc45)

### 索引的类型

B-Tree索引、哈希索引、空间数据索引、全文索引

### B-Tree索引

索引能够加快访问数据的速度，因为存储引擎不再需要进行全表扫描来获取需要的数据，取而代之的是从索引的根节点开始进行搜索。通过B-Tree的查找方式，可以快速定位到查找的叶子节点(或者不存在)。而叶子节点的指针指向了被索引的数据。

假设定义了这样的索引: key(last_name, first_name, birthday)，有效的查找方式：

* 全值匹配
* 匹配最左前缀。如：上述索引只根据 last_name 查找，即只使用第一列
* 匹配列前缀。如：上述索引只查找所有以J开头的 last_name。也只用到了第一列
* 匹配范围值。如：查找 last_name 范围在 Allen 和 Barry 之间的人。也只用到了第一列
* 精确匹配某一列并范围匹配另外一列。第一列全匹配，第二列范围匹配
* 只访问索引的查询。后续会单独讨论“索引覆盖”

关于B-Tree索引的限制：

* 如果不是按照索引的最左列开始查找，则无法使用索引。
* 不能跳过索引中的列。如：上述索引下查找姓为Smith并且在某个特定日期出生的人，如果不指定名(first_name)，则MySQL只能使用索引的第一列。
* 如果查询中有某个列的范围查找，则其右边所有列都无法使用索引优化查找。例如`WHERE last_name='Smith' AND first_name LIKE 'J%' AND birthday='1976-12-23'`, 这个查询只能使用索引的前两列。

注：由上述限制可知，在优化性能的时候，可能需要使用相同的列但顺序不同的索引来满足不同类型的查询需求。

