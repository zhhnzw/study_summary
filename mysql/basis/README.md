## MySQL 基础

### 连接管理

每个客户端连接都会在服务器进程中拥有一个线程，这个连接的查询只会在这个单独的线程中执行，该线程只能在某个CPU核心中运行。

### 数据类型

### 存储引擎

| 对比项   | InnoDB                                                       | MyISAM                                                       |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 外键     | 支持                                                         | 不支持                                                       |
| 事务     | 支持                                                         | 不支持                                                       |
| 行表锁   | 行锁<br>操作时只锁住该行记录<br>适合高并发的场景             | 表锁<br>即使操作一条记录也会锁住整个表<br>不适合高并发的场景 |
| 缓存     | 不仅缓存索引<br>还缓存真实数据<br>对内存要求较高<br>内存大小对性能有决定性影响 | 只缓存索引<br>不缓存真实数据                                 |
| 占用空间 | 大                                                           | 小                                                           |
| 关注点   | 事务                                                         | 性能                                                         |

### SQL

#### 连接查询（[Join](join.md)）

#### 事务

一个最小的不可再分的工作单元。

通常事务必须满足4个条件（ACID）：原子性（Atomicity，或称不可分割性）、一致性（Consistency）、隔离性（Isolation，又称独立性）、持久性（Durability）。

|  条件  |                             解释                             |
| :----: | :----------------------------------------------------------: |
| 原子性 | 一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。 |
| 一致性 | 在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。 |
| 隔离性 | 数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。 |
| 持久性 | 事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。 |